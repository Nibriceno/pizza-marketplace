{% extends 'core/base.html' %}

{% block title %}{{ category.title }}{% endblock title %}

{% block content %}

<div class="columns is-multiline mb-6">

  <!-- TÃTULO DE LA CATEGORÃA -->
  <div class="column is-12 has-text-centered mt-6 mb-4">
    <h2 class="is-size-3">{{ category.title }}</h2>
  </div>

  <!-- ğŸ§  FILTRO DE PREFERENCIAS SOLO SI EL USUARIO TIENE -->
  {% if user.is_authenticated and user.profile.preferences.count > 0 %}
    <div class="column is-12 has-text-centered mb-5">
      {% if solo_pref %}
        <a href="?" class="button is-light is-rounded">
          ğŸ‘€ Ver todas las pizzas
        </a>
        <p class="has-text-grey mt-2">Mostrando solo pizzas segÃºn tus preferencias ğŸƒ</p>
      {% else %}
        <a href="?solo_pref=1" class="button is-success is-light is-rounded">
          ğŸŒ± Ver solo mis preferencias
        </a>
      {% endif %}
    </div>
  {% endif %}

  <!-- LISTADO DE PRODUCTOS -->
  {% for product in products %}
    {% include 'product/parts/list_item.html' %}
  {% empty %}
    <div class="column is-12 has-text-centered">
      <p class="has-text-grey">
        ğŸš« No hay productos disponibles. Inicia sesiÃ³n o selecciona un paÃ­s en la pÃ¡gina principal.
      </p>
    </div>
  {% endfor %}
</div>

{% endblock content %}
