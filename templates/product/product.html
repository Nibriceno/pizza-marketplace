{% extends 'core/base.html' %}

{% block title %}{{ product.title }}{% endblock title %}

{% block content %}

<div class="columns is-centered">
  <div class="column is-8">

    <!-- ğŸ“¸ Imagen -->
    {% if product.image %}
      <figure class="image mb-5" style="max-width: 420px;">
        <img src="{{ product.image.url }}" alt="{{ product.title }}" style="border-radius: 12px;">
      </figure>
    {% endif %}

    <!-- ğŸ§€ Detalles -->
    <h1 class="title mb-2">{{ product.title }}</h1>

    <p class="is-size-5 has-text-weight-semibold mb-3">
      {{ currency_symbol }}{{ product.price }} 
      <span class="is-size-6 has-text-grey ml-1">{{ currency_code }}</span>
    </p>

    <p class="mb-3">
      <span class="tag is-dark">{{ product.vendor.name }}</span>
      {% if product.preferences.all %}
        {% for pref in product.preferences.all %}
          <span class="tag is-success is-light ml-1">
            {% if pref.name|lower == "vegana" %}
              ğŸŒ± {{ pref.name }}
            {% elif pref.name|lower == "sin gluten" %}
              ğŸŒ¾ {{ pref.name }}
            {% else %}
              ğŸ• {{ pref.name }}
            {% endif %}
          </span>
        {% endfor %}
      {% endif %}
    </p>

    <p class="mb-5">{{ product.description }}</p>

    <hr>

    <!-- ğŸ›’ Agregar al carrito -->
    <form method="post">
      {% csrf_token %}
      <div class="field has-addons">
        <div class="control">
          <input type="number" name="quantity" value="1" class="input" min="1">
        </div>
        <div class="control">
          <button class="button is-dark is-uppercase">
            Agregar al carrito ğŸ›’
          </button>
        </div>
      </div>
    </form>

    <hr>

    <!-- ğŸ§© Productos Similares -->
    {% if similar_products %}
      <div class="mt-6">
        <h2 class="subtitle mb-4">Productos Similares ğŸ•</h2>
        <div class="columns is-multiline">
          {% for product in similar_products %}
            {% include 'product/parts/list_item.html' %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

    <!-- ğŸ’š Recomendaciones segÃºn tus preferencias -->
    {% if recommended_products %}
      <div class="mt-6">
        <h2 class="subtitle mb-4">Recomendaciones para ti ğŸ’š</h2>
        <div class="columns is-multiline">
          {% for rec in recommended_products %}
            {% include 'product/parts/list_item.html' with product=rec %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

  </div>
</div>

<!-- âœ¨ Estilos -->
<style>
  .tag.is-success.is-light {
    font-size: .9rem;
    border-radius: 10px;
  }
  .button.is-dark:hover {
    background-color: #222;
  }
</style>

{% endblock content %}

