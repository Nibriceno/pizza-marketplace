{% extends 'core/base.html' %}
{% load widget_tweaks %}

{% block title %}Iniciar sesiÃ³n{% endblock title %}

{% block content %}
<div class="container mt-6" style="max-width: 450px;">
    <h1 class="title has-text-centered">Iniciar sesiÃ³n</h1>
    <p class="subtitle has-text-centered mb-5">Accede a tu cuenta</p>

    <!-- âœ… Bloque de mensajes -->
    {% if messages %}
      <div style="margin-bottom: 1.5rem;">
        {% for message in messages %}
          <div class="notification 
            {% if message.tags == 'success' %}is-success{% elif message.tags == 'error' %}is-danger{% else %}is-info{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- ðŸ”’ Formulario -->
    <form method="post" action="" class="box">
        {% csrf_token %}

        <!-- Usuario -->
        <div class="field">
            <label class="label">Usuario</label>
            <div class="control has-icons-left">
                {{ form.username|add_class:"input is-fullwidth" }}
                <span class="icon is-small is-left">
                    <i class="fas fa-user"></i>
                </span>
            </div>
            <p class="help is-danger">{{ form.username.errors }}</p>
        </div>

        <!-- ContraseÃ±a -->
        <div class="field">
            <label class="label">ContraseÃ±a</label>
            <div class="control has-icons-left">
                {{ form.password|add_class:"input is-fullwidth" }}
                <span class="icon is-small is-left">
                    <i class="fas fa-lock"></i>
                </span>
            </div>
            <p class="help is-danger">{{ form.password.errors }}</p>

            <!-- âœ… OlvidÃ© mi contraseÃ±a -->
            <p class="has-text-right mt-2">
                <a href="{% url 'vendor:password_reset' %}" class="has-text-grey is-size-7">
                    Â¿Olvidaste tu contraseÃ±a?
                </a>
            </p>
        </div>

        <!-- BotÃ³n -->
        <div class="field mt-4">
            <div class="control">
                <button type="submit" class="button is-primary is-fullwidth is-uppercase">
                    Iniciar sesiÃ³n
                </button>
            </div>
        </div>
    </form>

    <!-- Registro -->
    <p class="has-text-centered mt-3">
        Â¿No tienes cuenta? <br>
        <a href="{% url 'vendor:become-customer' %}" class="has-text-primary has-text-weight-semibold">
            RegÃ­strate como cliente
        </a>
        <span> o </span>
        <a href="{% url 'vendor:become-vendor' %}" class="has-text-primary has-text-weight-semibold">
            como vendedor
        </a>
    </p>
</div>

<!-- ðŸŽ¨ Estilos -->
<style>
    input.input {
        border-radius: 8px;
    }

    .notification {
        border-radius: 8px;
        font-size: 0.95rem;
    }
</style>

<!-- Ãconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock content %}
