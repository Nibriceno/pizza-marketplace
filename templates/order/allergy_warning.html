{% extends "core/base.html" %}

{% block title %}Advertencia de alergia{% endblock %}

{% block content %}
<div class="container" style="max-width: 700px; margin-top: 40px;">
  <div class="box" style="border-radius: 14px; box-shadow: 0 6px 18px rgba(0,0,0,.12);">
    
    <h1 class="title is-4 has-text-danger mb-3">
      âš  Posible riesgo de alergia
    </h1>

    <p class="mb-4">
      Detectamos que la pizza <strong>{{ product.title }}</strong> contiene ingredientes asociados a tus alergias registradas.
    </p>

    <div class="content">
      <ul>
        {% for conflict in conflicts %}
          <li>
            <strong>{{ conflict.allergy.name }}:</strong>
            {% for ing in conflict.ingredients %}
              {{ ing.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </li>
        {% endfor %}
      </ul>
    </div>

    <p class="has-text-weight-semibold mb-4">
      Por tu seguridad recomendamos <span class="has-text-danger">no consumir este producto</span>.
    </p>

    <div class="columns is-mobile">
      <div class="column">
        <a href="{% url 'cart:cart' %}" class="button is-light is-fullwidth">
          Volver al carrito
        </a>
      </div>
      <div class="column">
        <a href="{% url 'cart:cart' %}?add_product={{ product.id }}&ignore_allergy_warning=1"
           class="button is-danger is-fullwidth">
          Agregar de todos modos
        </a>
      </div>
    </div>

  </div>
</div>
{% endblock %}
